# 协同进化实验（重复囚徒困境锦标赛）

## 实验目标

在多策略随机匹配环境下验证《协同的进化》中“友善、报复、宽容、可理解”策略的表现；比较不同角色类型（策略）在含噪声、长周期对局下的得分与合作稳定性。

## 模型设定

- **对局参数**：默认 200 轮重复囚徒困境，支付矩阵 `R=3, T=5, P=1, S=0`，动作噪声 1.5%。噪声用于模拟误操作，若发生则自动翻转决策。
- **角色池**：每种策略投放 12 名角色，共 96 名。每轮随机洗牌后两两对战，连续 30 轮以确保参赛次数均衡。
- **策略集合**：
  - `永远合作`：无条件合作。
  - `永远背叛`：无条件背叛。
  - `以牙还牙`：先合作，再复刻对手上一轮。
  - `宽容版以牙还牙`：对单次背叛 30% 概率宽恕。
  - `严厉惩罚者`（Grim）：一旦对方背叛就永久背叛。
  - `赢则守输则换`（Win-Stay Lose-Shift）：上一轮一致则沿用，否则切换动作。
  - `怀疑型以牙还牙`：首轮背叛，此后复制对手。
  - `随机触发以牙还牙`：复刻对手行为，但 20% 概率主动合作。

## 输出指标

程序会按照以下层次输出中文报告：

1. **总体介绍**：参数、噪声设定、角色描述。
2. **角色总排行榜**：96 名角色的场均得分、合作率、互惠率、最好/最差成绩、标准差等。
3. **角色类型综合排名**：按策略汇总的平均得分、合作率与稳定性。
4. **按策略分组**：每种策略内部的 12 名角色排名，并标注其在全局的综合名次。
5. **整体观察**：平均合作率、互惠率与对冠军策略的分析。

示例命令（PowerShell）：

```powershell
mvn -q "-DskipTests" "-Dfile.encoding=UTF-8" ^
    -Dexec.mainClass=com.river.experiment.cooperation.CooperationApp exec:java
```

若出现中文乱码，可先执行 `chcp 65001`。

## 可调参数

在 `CooperationExperiment` 或 `CooperationTournament` 中调整：

- `rounds`：单场重复次数，影响策略积累得分的稳定性。
- `noiseProbability`：动作噪声；适度噪声能凸显宽容策略的优势。
- `agentsPerStrategy`：每种策略投放的角色数。
- `encounterRounds`：随机洗牌对局轮次。

## 扩展建议

- 引入更多策略（如 Pavlov、无条件随机、自适应学习等），观察互惠结构的变化。
- 将 `TournamentResult` 导出为 CSV/JSON，使用 Python、R 绘制热力图或雷达图。
- 将参数读取外部配置（YAML/JSON），便于批量实验和可重复研究。

## 文件结构

- `CooperationStrategy.java`：策略枚举，含中文描述。
- `CooperationTournament.java`：核心模拟流程，负责随机配对与统计。
- `CooperationExperiment.java`：将结果组装为中文文章段落。
- `CooperationApp.java`：独立运行入口。
