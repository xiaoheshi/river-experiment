# 亲缘选择演化实验说明

## 实验目标

该实验通过模拟包含利他者与自私者的族群，验证汉密尔顿法则（`rB > C`）在推动表面利他行为演化中的作用。我们将利他行为视为个体向近亲支付成本、但亲属获得收益的互动，并追踪直接适合度与包容适合度的差异。

## 模型设定

- **人口结构**：族群被划分为多个固定规模的家庭，以代表近亲群体，家庭内相关系数 `r` 由参数控制。
- **行为策略**：
  - *利他者*：对家庭内其他成员支付成本 `C`，并使他们平均获得收益 `B`。
  - *自私者*：不支付成本，也不向他人提供收益。
- **适合度计算**：
  - 直接适合度包含基础值与实际收支。
  - 包容适合度 = 直接适合度 + `r ×`（该个体给予亲属的收益）。
- **繁殖机制**：以包容适合度作为繁殖权重进行抽样，形成下一代；同时引入小概率的策略突变。

## 关键参数

| 参数 | 默认值 | 含义 |
| --- | --- | --- |
| `populationSize` | 400 | 总人口数量 |
| `familySize` | 4 | 每家人口数 |
| `benefit` (`B`) | 2.4 | 利他行为给予亲属的总收益 |
| `cost` (`C`) | 0.8 | 利他行为承担的成本 |
| `relatednessWithinFamily` (`r`) | 0.5 | 家庭内部平均相关系数 |
| `mutationRate` | 0.02 | 策略突变概率 |
| `generations` | 80 | 模拟代数 |

上述默认参数满足 `rB (= 1.2) > C (= 0.8)`，因此理论上利他策略应在族群中占据优势。

## 运行步骤

1. 执行 KinSelectionApp main 方法运行模拟。
2. 控制台将输出关键代次（每 10 代）以及最终一代的利他者/自私者占比、直接适合度与包容适合度。

## 观察指标

- **利他者占比**：若随时间升高并稳定，说明包容适合度优势驱动了策略传播。
- **直接适合度差值**：利他者通常承受直接适合度劣势（负值），体现“表面利他”。
- **包容适合度差值**：若为正，代表利他者整体适应性更高，从而获得更多繁殖机会。

## 扩展建议

1. 批量扫描 `B`、`C`、`r` 参数，寻找 `rB = C` 的临界点，以进一步验证汉密尔顿法则。
2. 将 `GenerationStats` 输出到 CSV 或 JSON，配合 Python/R 制作演化曲线图。
3. 引入多策略或可变家庭规模，探索更复杂的社会结构对利他行为的影响。
